!function(a,b,c,d){"use strict";var e="treeview",f={};f.settings={injectStyle:!0,levels:2,allNode:!1,counter:null,selectedSummary:null,mobileView:!1,searchView:!1,searchNodes:null,expandIcon:"glyphicon glyphicon-plus",collapseIcon:"glyphicon glyphicon-minus",emptyIcon:"glyphicon",nodeIcon:"",selectedIcon:"",checkedIcon:"glyphicon glyphicon-check",uncheckedIcon:"glyphicon glyphicon-unchecked",color:d,backColor:d,borderColor:d,onhoverColor:"#F5F5F5",selectedColor:"#FFFFFF",selectedBackColor:"#428bca",searchResultColor:"#D9534F",searchResultBackColor:d,enableLinks:!1,highlightSelected:!0,highlightSearchResults:!0,showBorder:!0,showIcon:!0,showCheckbox:!1,showTags:!1,multiSelect:!1,onNodeChecked:d,onNodeCollapsed:d,onNodeDisabled:d,onNodeEnabled:d,onNodeExpanded:d,onNodeSelected:d,onNodeUnchecked:d,onNodeUnselected:d,onSearchComplete:d,onSearchCleared:d},f.options={silent:!1,ignoreChildren:!1},f.searchOptions={ignoreCase:!0,exactMatch:!1,revealResults:!0};var g=function(b,c){return this.$element=a(b),this.elementId=b.id,this.styleId=this.elementId+"-style",this.init(c),{options:this.options,init:a.proxy(this.init,this),remove:a.proxy(this.remove,this),getNode:a.proxy(this.getNode,this),getParent:a.proxy(this.getParent,this),getSiblings:a.proxy(this.getSiblings,this),getChildren:a.proxy(this.getChildren,this),getSelected:a.proxy(this.getSelected,this),getUnselected:a.proxy(this.getUnselected,this),getExpanded:a.proxy(this.getExpanded,this),getCollapsed:a.proxy(this.getCollapsed,this),getChecked:a.proxy(this.getChecked,this),getUnchecked:a.proxy(this.getUnchecked,this),getDisabled:a.proxy(this.getDisabled,this),getEnabled:a.proxy(this.getEnabled,this),selectNode:a.proxy(this.selectNode,this),unselectNode:a.proxy(this.unselectNode,this),toggleNodeSelected:a.proxy(this.toggleNodeSelected,this),checkByIdNames:a.proxy(this.checkByIdNames,this),checkAllLevel:a.proxy(this.checkAllLevel,this),checkByClass:a.proxy(this.checkByClass,this),checkAllChildren:a.proxy(this.checkAllChildren,this),checkAllDirectChildren:a.proxy(this.checkAllDirectChildren,this),collapseAll:a.proxy(this.collapseAll,this),collapseNode:a.proxy(this.collapseNode,this),expandAll:a.proxy(this.expandAll,this),expandNode:a.proxy(this.expandNode,this),toggleNodeExpanded:a.proxy(this.toggleNodeExpanded,this),revealNode:a.proxy(this.revealNode,this),openOnNode:a.proxy(this.openOnNode,this),checkAll:a.proxy(this.checkAll,this),checkNode:a.proxy(this.checkNode,this),uncheckAll:a.proxy(this.uncheckAll,this),uncheckNode:a.proxy(this.uncheckNode,this),toggleNodeChecked:a.proxy(this.toggleNodeChecked,this),disableAll:a.proxy(this.disableAll,this),disableNode:a.proxy(this.disableNode,this),enableAll:a.proxy(this.enableAll,this),enableNode:a.proxy(this.enableNode,this),toggleNodeDisabled:a.proxy(this.toggleNodeDisabled,this),search:a.proxy(this.search,this),clearSearch:a.proxy(this.clearSearch,this),searchView:a.proxy(this.searchView,this)}};g.prototype.init=function(b){this.tree=[],this.nodes=[],b.data&&("string"==typeof b.data&&(b.data=a.parseJSON(b.data)),this.tree=a.extend(!0,[],b.data),delete b.data),this.options=a.extend({},f.settings,b),this.destroy(),this.subscribeEvents(),this.setInitialStates({nodes:this.tree},0),this.render()},g.prototype.remove=function(){this.destroy(),a.removeData(this,e),a("#"+this.styleId).remove()},g.prototype.destroy=function(){this.initialized&&(this.$wrapper.remove(),this.$wrapper=null,this.unsubscribeEvents(),this.initialized=!1)},g.prototype.unsubscribeEvents=function(){this.$element.off("click"),this.$element.off("nodeChecked"),this.$element.off("nodeCollapsed"),this.$element.off("nodeDisabled"),this.$element.off("nodeEnabled"),this.$element.off("nodeExpanded"),this.$element.off("nodeSelected"),this.$element.off("nodeUnchecked"),this.$element.off("nodeUnselected"),this.$element.off("searchComplete"),this.$element.off("searchCleared")},g.prototype.subscribeEvents=function(){this.unsubscribeEvents(),this.$element.on("click",a.proxy(this.clickHandler,this)),"function"==typeof this.options.onNodeChecked&&this.$element.on("nodeChecked",this.options.onNodeChecked),"function"==typeof this.options.onNodeCollapsed&&this.$element.on("nodeCollapsed",this.options.onNodeCollapsed),"function"==typeof this.options.onNodeDisabled&&this.$element.on("nodeDisabled",this.options.onNodeDisabled),"function"==typeof this.options.onNodeEnabled&&this.$element.on("nodeEnabled",this.options.onNodeEnabled),"function"==typeof this.options.onNodeExpanded&&this.$element.on("nodeExpanded",this.options.onNodeExpanded),"function"==typeof this.options.onNodeSelected&&this.$element.on("nodeSelected",this.options.onNodeSelected),"function"==typeof this.options.onNodeUnchecked&&this.$element.on("nodeUnchecked",this.options.onNodeUnchecked),"function"==typeof this.options.onNodeUnselected&&this.$element.on("nodeUnselected",this.options.onNodeUnselected),"function"==typeof this.options.onSearchComplete&&this.$element.on("searchComplete",this.options.onSearchComplete),"function"==typeof this.options.onSearchCleared&&this.$element.on("searchCleared",this.options.onSearchCleared)},g.prototype.setInitialStates=function(b,c){if(b.nodes){c+=1;var d=b,e=this;a.each(b.nodes,function(a,b){b.nodeId=e.nodes.length,b.parentId=d.nodeId,b.level=c,b.hasOwnProperty("selectable")||(b.selectable=!0),b.state=b.state||{},b.state.hasOwnProperty("checked")||(b.state.checked=!1),b.state.hasOwnProperty("disabled")||(b.state.disabled=!1),b.state.hasOwnProperty("expanded")||(!b.state.disabled&&c<e.options.levels&&b.nodes&&b.nodes.length>0?b.state.expanded=!0:b.state.expanded=!1),b.state.hasOwnProperty("selected")||(b.state.selected=!1),e.nodes.push(b),b.nodes&&e.setInitialStates(b,c)})}},g.prototype.clickHandler=function(b){this.options.enableLinks||b.preventDefault();var c=a(b.target),d=c.attr("class")?c.attr("class").split(" "):[];if(-1!==d.indexOf("back-link")){var e=c.attr("data-id"),g=this.getNode(e);return this.setExpandedState(g,!1,f.options),void this.render(g,"select")}var h=this.findNode(c);h&&!h.state.disabled&&(-1!==d.indexOf("expand-icon")?(this.toggleExpandedState(h,f.options),this.render(h,"expand")):-1!==d.indexOf("check-icon")?(this.toggleCheckedState(h,f.options),this.render()):(this.toggleCheckedState(h,f.options),this.render(h,"select")))},g.prototype.findNode=function(a){var b=a.closest("li.list-group-item").attr("data-nodeid"),c=this.nodes[b];return c||console.log("Error: node does not exist"),c},g.prototype.toggleExpandedState=function(a,b){a&&this.setExpandedState(a,!a.state.expanded,b)},g.prototype.setExpandedState=function(b,c,d){c!==b.state.expanded&&(c&&b.nodes?(b.state.expanded=!0,d.silent||this.$element.trigger("nodeExpanded",a.extend(!0,{},b))):c||(b.state.expanded=!1,d.silent||this.$element.trigger("nodeCollapsed",a.extend(!0,{},b)),b.nodes&&!d.ignoreChildren&&a.each(b.nodes,a.proxy(function(a,b){this.setExpandedState(b,!1,d)},this))))},g.prototype.toggleSelectedState=function(a,b){a&&this.setSelectedState(a,!a.state.selected,b)},g.prototype.setSelectedState=function(b,c,d){c!==b.state.selected&&(c?(this.options.multiSelect||a.each(this.findNodes("true","g","state.selected"),a.proxy(function(a,b){this.setSelectedState(b,!1,d)},this)),b.state.selected=!0,d.silent||this.$element.trigger("nodeSelected",a.extend(!0,{},b))):(b.state.selected=!1,d.silent||this.$element.trigger("nodeUnselected",a.extend(!0,{},b))))},g.prototype.toggleCheckedState=function(a,b){a&&this.setCheckedState(a,!a.state.checked,b)},g.prototype.setCheckedState=function(b,c,d){if(c!==b.state.checked){var e=this,f=this.options.allNode;if(0===b.nodeId&&f&&c)return this.uncheckAll(d),void(b.state.checked=!0);c?(f&&(e.nodes[0].state.checked=!1),b.state.checked=!0,d.silent||this.$element.trigger("nodeChecked",a.extend(!0,{},b))):(b.state.checked=!1,d.silent||this.$element.trigger("nodeUnchecked",a.extend(!0,{},b)))}},g.prototype.setDisabledState=function(b,c,d){c!==b.state.disabled&&(c?(b.state.disabled=!0,this.setExpandedState(b,!1,d),this.setSelectedState(b,!1,d),this.setCheckedState(b,!1,d),d.silent||this.$element.trigger("nodeDisabled",a.extend(!0,{},b))):(b.state.disabled=!1,d.silent||this.$element.trigger("nodeEnabled",a.extend(!0,{},b))))},g.prototype.render=function(b,c){if(this.initialized||(this.$element.addClass(e),this.$wrapper=a(this.template.list),this.injectStyle(),this.initialized=!0),this.$element.empty().append(this.$wrapper.empty()),!0===this.options.searchView)return void this.buildSearchView(this.options.searchNodes);this.buildTree(this.tree,0,b,c)},g.prototype.buildTree=function(b,c,d,e){if(b){var f=this;if(this.options.mobileView)return void f.buildMobileTree(b,c,d,e);c+=1,a.each(b,function(b,d){for(var e=a(f.template.item).addClass("node-"+f.elementId).addClass(d.state.checked?"node-checked":"").addClass(d.state.disabled?"node-disabled":"").addClass(d.state.selected?"node-selected":"").addClass(d.searchResult?"search-result":"").attr("data-nodeid",d.nodeId).attr("style",f.buildStyleOverride(d)),g=0;g<c-1;g++)e.append(f.template.indent);var h=[];if(d.nodes?(h.push("expand-icon"),d.state.expanded?h.push(f.options.collapseIcon):h.push(f.options.expandIcon)):h.push(f.options.emptyIcon),e.append(a(f.template.icon).addClass(h.join(" "))),f.options.showIcon&&(h=["node-icon"],h.push(d.icon||f.options.nodeIcon),d.state.selected&&(h.pop(),h.push(d.selectedIcon||f.options.selectedIcon||d.icon||f.options.nodeIcon)),e.append(a(f.template.icon).addClass(h.join(" ")))),f.options.showCheckbox&&(h=["check-icon"],d.state.checked?h.push(f.options.checkedIcon):h.push(f.options.uncheckedIcon),e.append(a(f.template.icon).addClass(h.join(" ")))),f.options.enableLinks?e.append(a(f.template.link).attr("href",d.href).append(d.text)):d.state.checked?e.append(d.text).append("&nbsp;&nbsp;<span class='glyphicon glyphicon-ok'></span>"):e.append(d.text).append("&nbsp;&nbsp;<span class='glyphicon glyphicon-ok ok-prompt' style='opacity:0;'></span>"),f.options.showTags&&d.tags&&a.each(d.tags,function(b,c){e.append(a(f.template.badge).append(c))}),f.$wrapper.append(e),d.nodes&&d.state.expanded&&!d.state.disabled)return f.buildTree(d.nodes,c)});var g=this.options.counter;g&&a(g).html(this.getChecked().length)}},g.prototype.buildMobileTree=function(b,c,e,f){var g,h=this,i=null;if(f===d||"select"==f&&1==e.level?g=this.nodes.filter(function(a){return 1===a.level}):"select"==f?(g=this.getChildren(this.getParent(e)),i=this.getParent(e)):"expand"==f&&(g=this.getChildren(e),i=e),null!==i){var j=a(h.template.item).addClass("back-link-row");for(c=i.level;c>0;c--)a(j).prepend(" < <span class='back-link' data-id='"+i.nodeId+"'>"+i.text+"</span>"),i=h.getParent(i);this.$wrapper.append(a(h.template.item).append(j))}a.each(g,function(b,d){for(var e=a(h.template.item).addClass("node-"+h.elementId).addClass(d.state.checked?"node-checked":"").addClass(d.state.disabled?"node-disabled":"").addClass(d.state.selected?"node-selected":"").addClass(d.searchResult?"search-result":"").attr("data-nodeid",d.nodeId).attr("style",h.buildStyleOverride(d)),f=0;f<c-1;f++)e.append(h.template.indent);var g=[];d.nodes?(g.push("expand-icon"),d.state.expanded?g.push(h.options.collapseIcon):g.push(h.options.expandIcon)):g.push(h.options.emptyIcon),e.append(a(h.template.icon).addClass(g.join(" "))),h.options.showIcon&&(g=["node-icon"],g.push(d.icon||h.options.nodeIcon),d.state.selected&&(g.pop(),g.push(d.selectedIcon||h.options.selectedIcon||d.icon||h.options.nodeIcon)),e.append(a(h.template.icon).addClass(g.join(" ")))),h.options.showCheckbox&&(g=["check-icon"],d.state.checked?g.push(h.options.checkedIcon):g.push(h.options.uncheckedIcon),e.append(a(h.template.icon).addClass(g.join(" ")))),h.options.enableLinks?e.append(a(h.template.link).attr("href",d.href).append(d.text)):d.state.checked?e.append(d.text).append("&nbsp;&nbsp;<span class='glyphicon glyphicon-ok'></span>"):e.append(d.text).append("&nbsp;&nbsp;<span class='glyphicon glyphicon-ok ok-prompt' style='opacity:0;'></span>"),h.options.showTags&&d.tags&&a.each(d.tags,function(b,c){e.append(a(h.template.badge).append(c))}),h.$wrapper.append(e)});var k=this.options.counter;if(k&&a(k).html(this.getChecked().length),this.options.selectedSummary){var j=a(h.template.item),l="Nodes Selected: ",m=h.getChecked();if(0===m.length)l+="None  ";else for(var n=0;n<m.length;n++)l+=m[n].text.split("<")[0]+", ";a(this.options.selectedSummary).html(l.slice(0,-2))}},g.prototype.buildSearchView=function(b){var c=this;a.each(b,function(b,d){var e=a(c.template.item).addClass("node-"+c.elementId).addClass(d.state.checked?"node-checked":"").addClass(d.state.disabled?"node-disabled":"").addClass(d.state.selected?"node-selected":"").attr("data-nodeid",d.nodeId).attr("style",c.buildStyleOverride(d)),f=[];d.nodes?(f.push("expand-icon"),f.push(c.options.expandIcon)):f.push(c.options.emptyIcon),e.append(a(c.template.icon).addClass(f.join(" "))),c.options.showIcon&&(f=["node-icon"],f.push(d.icon||c.options.nodeIcon),d.state.selected&&(f.pop(),f.push(d.selectedIcon||c.options.selectedIcon||d.icon||c.options.nodeIcon)),e.append(a(c.template.icon).addClass(f.join(" ")))),c.options.showCheckbox&&(f=["check-icon"],d.state.checked?f.push(c.options.checkedIcon):f.push(c.options.uncheckedIcon),e.append(a(c.template.icon).addClass(f.join(" ")))),c.options.enableLinks?e.append(a(c.template.link).attr("href",d.href).append(d.text)):d.state.checked?e.append(c.buildBreadcrumbs(d)).append(d.text).append("&nbsp;&nbsp;<span class='glyphicon glyphicon-ok'></span>"):e.append(c.buildBreadcrumbs(d)).append(d.text).append("&nbsp;&nbsp;<span class='glyphicon glyphicon-ok ok-prompt' style='opacity:0;'></span>"),c.options.showTags&&d.tags&&a.each(d.tags,function(b,d){e.append(a(c.template.badge).append(d))}),c.$wrapper.append(e)});var d=this.options.counter;if(d&&a(d).html(this.getChecked().length),this.options.selectedSummary){var e="Nodes Selected: ",f=c.getChecked();if(0===f.length)e+="None  ";else for(var g=0;g<f.length;g++)e+=f[g].text.split("<")[0]+", ";a(this.options.selectedSummary).html(e.slice(0,-2))}},g.prototype.buildBreadcrumbs=function(b){var c=this;if(null!==b&&1!==b.level){var d=a(c.template.paragraph);b=c.getParent(b);for(var e=b.level;e>0;e--)a(d).prepend("<span class='back-link' data-id='"+b.nodeId+"'>"+b.text+"</span>"),b=c.getParent(b);return d}},g.prototype.buildStyleOverride=function(a){if(a.state.disabled)return"";var b=a.color,c=a.backColor;return this.options.highlightSelected&&a.state.selected&&(this.options.selectedColor&&(b=this.options.selectedColor),this.options.selectedBackColor&&(c=this.options.selectedBackColor)),this.options.highlightSearchResults&&a.searchResult&&!a.state.disabled&&(this.options.searchResultColor&&(b=this.options.searchResultColor),this.options.searchResultBackColor&&(c=this.options.searchResultBackColor)),a.state.checked&&(b="#428bca",c="#d3d3d3"),"color:"+b+";background-color:"+c+";"},g.prototype.injectStyle=function(){this.options.injectStyle&&!c.getElementById(this.styleId)&&a('<style type="text/css" id="'+this.styleId+'"> '+this.buildStyle()+" </style>").appendTo("head")},g.prototype.buildStyle=function(){var a=".node-"+this.elementId+"{";return this.options.color&&(a+="color:"+this.options.color+";"),this.options.backColor&&(a+="background-color:"+this.options.backColor+";"),this.options.showBorder?this.options.borderColor&&(a+="border:1px solid "+this.options.borderColor+";"):a+="border:none;",a+="}",this.options.onhoverColor&&(a+=".node-"+this.elementId+":not(.node-disabled):hover{background-color:"+this.options.onhoverColor+";}"),this.css+a},g.prototype.template={list:'<ul class="list-group"></ul>',item:'<li class="list-group-item"></li>',indent:'<span class="indent"></span>',icon:'<span class="icon"></span>',link:'<a href="#" style="color:inherit;"></a>',badge:'<span class="badge"></span>',paragraph:"<p>"},g.prototype.css=".treeview .list-group-item{cursor:pointer}.treeview span.indent{margin-left:10px;margin-right:10px}.treeview span.icon{width:12px;margin-right:5px}.treeview .node-disabled{color:silver;cursor:not-allowed}",g.prototype.getNode=function(a){return this.nodes[a]},g.prototype.getParent=function(a){var b=this.identifyNode(a);return this.nodes[b.parentId]},g.prototype.getSiblings=function(b,c){var d=this.identifyNode(b);return 1===d.level?this.nodes.filter(function(a){return c?1===a.level:1===a.level&&a.id!==d.id}):a.map(this.getParent(d).nodes,function(a,b){return c?[a]:a.id!==d.id?[a]:void 0})},g.prototype.getChildren=function(a){return this.identifyNode(a).nodes},g.prototype.getSelected=function(){return this.findNodes("true","g","state.selected")},g.prototype.getUnselected=function(){return this.findNodes("false","g","state.selected")},g.prototype.getExpanded=function(){return this.findNodes("true","g","state.expanded")},g.prototype.getCollapsed=function(){return this.findNodes("false","g","state.expanded")},g.prototype.getChecked=function(){return this.findNodes("true","g","state.checked")},g.prototype.getUnchecked=function(){return this.findNodes("false","g","state.checked")},g.prototype.getDisabled=function(){return this.findNodes("true","g","state.disabled")},g.prototype.getEnabled=function(){return this.findNodes("false","g","state.disabled")},g.prototype.selectNode=function(b,c){this.forEachIdentifier(b,c,a.proxy(function(a,b){this.setSelectedState(a,!0,b)},this)),this.render()},g.prototype.unselectNode=function(b,c){this.forEachIdentifier(b,c,a.proxy(function(a,b){this.setSelectedState(a,!1,b)},this)),this.render()},g.prototype.toggleNodeSelected=function(b,c){this.forEachIdentifier(b,c,a.proxy(function(a,b){this.toggleSelectedState(a,b)},this)),this.render()},g.prototype.collapseAll=function(b){var c=this.findNodes("true","g","state.expanded");this.forEachIdentifier(c,b,a.proxy(function(a,b){this.setExpandedState(a,!1,b)},this)),this.render()},g.prototype.collapseNode=function(b,c){this.forEachIdentifier(b,c,a.proxy(function(a,b){this.setExpandedState(a,!1,b)},this)),this.render()},g.prototype.expandAll=function(b){if((b=a.extend({},f.options,b))&&b.levels)this.expandLevels(this.tree,b.levels,b);else{var c=this.findNodes("false","g","state.expanded");this.forEachIdentifier(c,b,a.proxy(function(a,b){this.setExpandedState(a,!0,b)},this))}this.render()},g.prototype.expandNode=function(b,c){this.forEachIdentifier(b,c,a.proxy(function(a,b){this.setExpandedState(a,!0,b),a.nodes&&b&&b.levels&&this.expandLevels(a.nodes,b.levels-1,b)},this)),this.render()},g.prototype.expandLevels=function(b,c,d){d=a.extend({},f.options,d),a.each(b,a.proxy(function(a,b){this.setExpandedState(b,c>0,d),b.nodes&&this.expandLevels(b.nodes,c-1,d)},this))},g.prototype.revealNode=function(b,c){this.forEachIdentifier(b,c,a.proxy(function(a,b){for(var c=this.getParent(a);c;)this.setExpandedState(c,!0,b),c=this.getParent(c)},this)),this.render()},g.prototype.openOnNode=function(a){if(!1!==this.options.mobileView){var b=this.identifyNode(a);this.render(b,"select")}},g.prototype.toggleNodeExpanded=function(b,c){this.forEachIdentifier(b,c,a.proxy(function(a,b){this.toggleExpandedState(a,b)},this)),this.render()},g.prototype.checkAll=function(b){var c=this.findNodes("false","g","state.checked");this.forEachIdentifier(c,b,a.proxy(function(a,b){this.setCheckedState(a,!0,b)},this)),this.render()},g.prototype.checkByIdNames=function(b){var c=this;a.each(this.nodes,a.proxy(function(a,d){-1!==b.indexOf(d.id)&&c.setCheckedState(d,!0,{ignoreChildren:!1,silent:!1})},this)),this.render()},g.prototype.checkAllChildren=function(a){var b=this.identifyNode(a);for(var c in b.nodes)this.setCheckedState(b.nodes[c],!0,{ignoreChildren:!1,silent:!1}),"object"==typeof b.nodes[c].nodes&&null!==b.nodes[c].nodes&&this.checkAllChildren(b.nodes[c]);this.render()},g.prototype.checkAllDirectChildren=function(a){var b=this.identifyNode(a);for(var c in b.nodes)this.setCheckedState(b.nodes[c],!0,{ignoreChildren:!1,silent:!1});this.render()},g.prototype.checkAllLevel=function(a){var b=this;this.nodes.filter(function(c){return c.level===a?b.setCheckedState(c,!0,{ignoreChildren:!1,silent:!1}):null}),this.render()},g.prototype.checkByClass=function(a){var b=this,c=a.replace(".","");this.nodes.filter(function(a){return-1!==a.classList.indexOf(c)?b.setCheckedState(a,!0,{ignoreChildren:!1,silent:!1}):null}),this.render()},g.prototype.checkNode=function(b,c){this.forEachIdentifier(b,c,a.proxy(function(a,b){this.setCheckedState(a,!0,b)},this)),this.render()},g.prototype.uncheckAll=function(b){var c=this.findNodes("true","g","state.checked");this.forEachIdentifier(c,b,a.proxy(function(a,b){this.setCheckedState(a,!1,b)},this)),this.render()},g.prototype.uncheckNode=function(b,c){this.forEachIdentifier(b,c,a.proxy(function(a,b){this.setCheckedState(a,!1,b)},this)),this.render()},g.prototype.toggleNodeChecked=function(b,c){this.forEachIdentifier(b,c,a.proxy(function(a,b){this.toggleCheckedState(a,b)},this)),this.render()},g.prototype.disableAll=function(b){var c=this.findNodes("false","g","state.disabled");this.forEachIdentifier(c,b,a.proxy(function(a,b){this.setDisabledState(a,!0,b)},this)),this.render()},g.prototype.disableNode=function(b,c){this.forEachIdentifier(b,c,a.proxy(function(a,b){this.setDisabledState(a,!0,b)},this)),this.render()},g.prototype.enableAll=function(b){var c=this.findNodes("true","g","state.disabled");this.forEachIdentifier(c,b,a.proxy(function(a,b){this.setDisabledState(a,!1,b)},this)),this.render()},g.prototype.enableNode=function(b,c){this.forEachIdentifier(b,c,a.proxy(function(a,b){this.setDisabledState(a,!1,b)},this)),this.render()},g.prototype.toggleNodeDisabled=function(b,c){this.forEachIdentifier(b,c,a.proxy(function(a,b){this.setDisabledState(a,!a.state.disabled,b)},this)),this.render()},g.prototype.forEachIdentifier=function(b,c,d){c=a.extend({},f.options,c),b instanceof Array||(b=[b]),a.each(b,a.proxy(function(a,b){d(this.identifyNode(b),c)},this))},g.prototype.identifyNode=function(a){return"number"==typeof a?this.nodes[a]:a},g.prototype.search=function(b,c){c=a.extend({},f.searchOptions,c),this.clearSearch({render:!1});var d=[];if(b&&b.length>0){c.exactMatch&&(b="^"+b+"$");var e="g";c.ignoreCase&&(e+="i"),d=this.findNodes(b,e),a.each(d,function(a,b){b.searchResult=!0})}return c.revealResults?this.revealNode(d):this.render(),this.$element.trigger("searchComplete",a.extend(!0,{},d)),d},g.prototype.searchView=function(b,c,d){if(!1===b)return console.log("Turning off"),this.options.searchView=!1,this.options.searchNodes=null,void this.render();d=a.extend({},f.searchOptions,d),this.clearSearch({render:!1});var e=[];if(b&&b.length>0){d.exactMatch&&(b="^"+b+"$");var g="g";d.ignoreCase&&(g+="i"),e=this.findNodes(b,g),a.each(e,function(a,b){b.searchResult=!0})}return this.options.searchView=!0,this.options.searchNodes=e,this.render(),this.$element.trigger("searchComplete",a.extend(!0,{},e)),e},g.prototype.clearSearch=function(b){b=a.extend({},{render:!0},b);var c=a.each(this.findNodes("true","g","searchResult"),function(a,b){b.searchResult=!1});b.render&&this.render(),this.$element.trigger("searchCleared",a.extend(!0,{},c))},g.prototype.findNodes=function(b,c,d){c=c||"g",d=d||"text";var e=this;return a.grep(this.nodes,function(a){var f=e.getNodeValue(a,d);if("string"==typeof f)return f.match(new RegExp(b,c))})},g.prototype.getNodeValue=function(a,b){var c=b.indexOf(".");if(c>0){var e=a[b.substring(0,c)],f=b.substring(c+1,b.length);return this.getNodeValue(e,f)}return a.hasOwnProperty(b)?a[b].toString():d};var h=function(a){b.console&&b.console.error(a)};a.fn[e]=function(b,c){var d;return this.each(function(){var f=a.data(this,e);"string"==typeof b?f?a.isFunction(f[b])&&"_"!==b.charAt(0)?(c instanceof Array||(c=[c]),d=f[b].apply(f,c)):h("No such method : "+b):h("Not initialized, can not call method : "+b):"boolean"==typeof b?d=f:a.data(this,e,new g(this,a.extend(!0,{},b)))}),d||this}}(jQuery,window,document);